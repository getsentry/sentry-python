language: python
sudo: false

matrix:
  include:
    - python: "2.7"
      env: DJANGO_VERSION=1.4.*
    - python: "2.7"
      env: DJANGO_VERSION=1.5.*
    - python: "2.7"
      env: DJANGO_VERSION=1.6.*
    - python: "2.7"
      env: DJANGO_VERSION=1.7.*
    - python: "2.7"
      env: DJANGO_VERSION=1.8.*
    - python: "2.7"
      env: DJANGO_VERSION=1.9.*

    - python: "3.4"
      env: DJANGO_VERSION=1.5.*
    - python: "3.4"
      env: DJANGO_VERSION=1.6.*
    - python: "3.4"
      env: DJANGO_VERSION=1.7.*
    - python: "3.4"
      env: DJANGO_VERSION=1.8.*
    - python: "3.4"
      env: DJANGO_VERSION=1.9.*
    - python: "3.4"
      env: DJANGO_VERSION=2.0.*

    - python: "3.5"
      env: DJANGO_VERSION=1.8.*
    - python: "3.5"
      env: DJANGO_VERSION=1.9.*
    - python: "3.5"
      env: DJANGO_VERSION=2.0.*

    - python: "3.6"
      env: DJANGO_VERSION=1.8.*
    - python: "3.6"
      env: DJANGO_VERSION=1.9.*
    - python: "3.6"
      env: DJANGO_VERSION=2.0.*

    - python: "3.6"
      env: DJANGO_VERSION=1.8.*
    - python: "3.6"
      env: DJANGO_VERSION=1.9.*
    - python: "3.6"
      env: DJANGO_VERSION=2.0.*

    - python: "3.7-dev"
      env: DJANGO_VERSION=1.8.*
    - python: "3.7-dev"
      env: DJANGO_VERSION=1.9.*
    - python: "3.7-dev"
      env: DJANGO_VERSION=2.0.*

install:
  - pip install -e .
  - pip install -Ur dev-requirements.txt
  - pip install -U "django==$DJANGO_VERSION"
  - |
    if [ "$DJANGO_VERSION" = 1.4.* ] || [ "$DJANGO_VERSION" = 1.5.* ] || [ "$DJANGO_VERSION" = 1.6.* ] || [ "$DJANGO_VERSION" = 1.7.* ] || [ "$DJANGO_VERSION" = 1.8.* ]; then
      pip install 'pytest-django<3.0';
    fi

script:
  - pytest # or py.test for Python versions 3.5 and below
