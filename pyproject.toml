[tool.black]
# 'extend-exclude' excludes files or directories in addition to the defaults
extend-exclude = '''
# A regex preceded with ^/ will apply only to files and directories
# in the root of the project.
(
    .*_pb2.py  # exclude autogenerated Protocol Buffer files anywhere in the project
    | .*_pb2_grpc.py  # exclude autogenerated Protocol Buffer files anywhere in the project
)
'''

[tool.coverage.run]
branch = true
omit = [
    "/tmp/*",
    "*/tests/*",
    "*/.venv/*",
]

[tool.coverage.report]
exclude_also = [
    "if TYPE_CHECKING:",
]

[tool.pytest.ini_options]
addopts = "-vvv -rfEs -s --durations=5 --cov=./sentry_sdk --cov-branch --cov-report= --tb=short --junitxml=.junitxml"
asyncio_mode = "strict"
asyncio_default_fixture_loop_scope = "function"
markers = [
    "tests_internal_exceptions: Handle internal exceptions just as the SDK does, to test it. (Otherwise internal exceptions are recorded and reraised.)",
]

[tool.pytest-watch]
verbose = true
nobeep = true
