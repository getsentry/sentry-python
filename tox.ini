# DON'T EDIT THIS FILE BY HAND. This file has been generated from a template by
# `scripts/populate_tox/populate_tox.py`.
#
# Any changes to the test matrix should be made
# - either in the script config in `scripts/populate_tox/config.py` (if you want
#   to change the auto-generated part)
# - or in the template in `scripts/populate_tox/tox.jinja` (if you want to change
#   a hardcoded part of the file)
#
# This file (and all resulting CI YAMLs) then needs to be regenerated via
# `scripts/generate-test-files.sh`.
#
# See also `scripts/populate_tox/README.md` for more info.

[tox]
requires =
    # This version introduced using pip 24.1 which does not work with older Celery and HTTPX versions.
    virtualenv<20.26.3
envlist =
    # === Common ===
    {py3.6,py3.7,py3.8,py3.9,py3.10,py3.11,py3.12,py3.13,py3.14,py3.14t}-common

    # === Gevent ===
    {py3.6,py3.8,py3.10,py3.11,py3.12}-gevent

    # === Integration Deactivation ===
    {py3.9,py3.10,py3.11,py3.12,py3.13,py3.14}-integration_deactivation

    # === Shadowed Module ===
    {py3.7,py3.8,py3.9,py3.10,py3.11,py3.12,py3.13,py3.14,py3.14t}-shadowed_module

    # === Integrations ===

    # Asgi
    {py3.7,py3.12,py3.13,py3.14,py3.14t}-asgi

    # AWS Lambda
    {py3.8,py3.9,py3.11,py3.13}-aws_lambda

    # Cloud Resource Context
    {py3.6,py3.12,py3.13}-cloud_resource_context

    # GCP
    {py3.7}-gcp

    # OpenTelemetry (OTel)
    {py3.7,py3.9,py3.12,py3.13,py3.14,py3.14t}-opentelemetry

    # OpenTelemetry with OTLP
    {py3.7,py3.9,py3.12,py3.13,py3.14}-otlp

    # OpenTelemetry Experimental (POTel)
    {py3.8,py3.9,py3.10,py3.11,py3.12,py3.13}-potel

    # === Integrations - Auto-generated ===
    # These come from the populate_tox.py script.

    # ~~~ MCP ~~~
    {py3.10,py3.12,py3.13}-mcp-v1.15.0
    {py3.10,py3.12,py3.13}-mcp-v1.18.0
    {py3.10,py3.12,py3.13}-mcp-v1.21.2
    {py3.10,py3.12,py3.13}-mcp-v1.23.2

    {py3.10,py3.13,py3.14,py3.14t}-fastmcp-v0.1.0
    {py3.10,py3.13,py3.14,py3.14t}-fastmcp-v0.4.1
    {py3.10,py3.13,py3.14,py3.14t}-fastmcp-v1.0
    {py3.10,py3.12,py3.13}-fastmcp-v2.13.3


    # ~~~ Agents ~~~
    {py3.10,py3.11,py3.12}-openai_agents-v0.0.19
    {py3.10,py3.12,py3.13}-openai_agents-v0.2.11
    {py3.10,py3.12,py3.13}-openai_agents-v0.4.2
    {py3.10,py3.13,py3.14,py3.14t}-openai_agents-v0.6.2

    {py3.10,py3.12,py3.13}-pydantic_ai-v1.0.18
    {py3.10,py3.12,py3.13}-pydantic_ai-v1.9.1
    {py3.10,py3.12,py3.13}-pydantic_ai-v1.18.0
    {py3.10,py3.12,py3.13}-pydantic_ai-v1.28.0


    # ~~~ AI Workflow ~~~
    {py3.9,py3.11,py3.12}-langchain-base-v0.1.20
    {py3.9,py3.12,py3.13}-langchain-base-v0.3.27
    {py3.10,py3.13,py3.14}-langchain-base-v1.1.3

    {py3.9,py3.11,py3.12}-langchain-notiktoken-v0.1.20
    {py3.9,py3.12,py3.13}-langchain-notiktoken-v0.3.27
    {py3.10,py3.13,py3.14}-langchain-notiktoken-v1.1.3

    {py3.9,py3.13,py3.14}-langgraph-v0.6.11
    {py3.10,py3.12,py3.13}-langgraph-v1.0.4


    # ~~~ AI ~~~
    {py3.8,py3.11,py3.12}-anthropic-v0.16.0
    {py3.8,py3.11,py3.12}-anthropic-v0.36.2
    {py3.8,py3.11,py3.12}-anthropic-v0.56.0
    {py3.9,py3.12,py3.13}-anthropic-v0.75.0

    {py3.9,py3.10,py3.11}-cohere-v5.4.0
    {py3.9,py3.11,py3.12}-cohere-v5.10.0
    {py3.9,py3.11,py3.12}-cohere-v5.15.0
    {py3.9,py3.11,py3.12}-cohere-v5.20.0

    {py3.9,py3.12,py3.13}-google_genai-v1.29.0
    {py3.9,py3.12,py3.13}-google_genai-v1.37.0
    {py3.9,py3.13,py3.14,py3.14t}-google_genai-v1.45.0
    {py3.10,py3.13,py3.14,py3.14t}-google_genai-v1.54.0

    {py3.8,py3.10,py3.11}-huggingface_hub-v0.24.7
    {py3.8,py3.12,py3.13}-huggingface_hub-v0.36.0
    {py3.9,py3.13,py3.14,py3.14t}-huggingface_hub-v1.2.1

    {py3.10,py3.12,py3.13}-litellm-v1.77.7
    {py3.10,py3.12,py3.13}-litellm-v1.78.7
    {py3.10,py3.12,py3.13}-litellm-v1.79.3
    {py3.10,py3.12,py3.13}-litellm-v1.80.9

    {py3.8,py3.11,py3.12}-openai-base-v1.0.1
    {py3.8,py3.12,py3.13}-openai-base-v1.109.1
    {py3.9,py3.13,py3.14,py3.14t}-openai-base-v2.9.0

    {py3.8,py3.11,py3.12}-openai-notiktoken-v1.0.1
    {py3.8,py3.12,py3.13}-openai-notiktoken-v1.109.1
    {py3.9,py3.13,py3.14,py3.14t}-openai-notiktoken-v2.9.0


    # ~~~ Cloud ~~~
    {py3.6,py3.7}-boto3-v1.12.49
    {py3.6,py3.9,py3.10}-boto3-v1.21.46
    {py3.7,py3.11,py3.12}-boto3-v1.33.13
    {py3.9,py3.13,py3.14,py3.14t}-boto3-v1.42.5

    {py3.6,py3.7,py3.8}-chalice-v1.16.0
    {py3.9,py3.12,py3.13}-chalice-v1.32.0


    # ~~~ DBs ~~~
    {py3.7,py3.8,py3.9}-asyncpg-v0.23.0
    {py3.7,py3.9,py3.10}-asyncpg-v0.26.0
    {py3.8,py3.11,py3.12}-asyncpg-v0.29.0
    {py3.9,py3.13,py3.14,py3.14t}-asyncpg-v0.31.0

    {py3.9,py3.13,py3.14}-clickhouse_driver-v0.2.10

    {py3.6}-pymongo-v3.5.1
    {py3.6,py3.10,py3.11}-pymongo-v3.13.0
    {py3.9,py3.13,py3.14,py3.14t}-pymongo-v4.15.5

    {py3.6}-redis-v2.10.6
    {py3.6,py3.7,py3.8}-redis-v3.5.3
    {py3.7,py3.10,py3.11}-redis-v4.6.0
    {py3.8,py3.11,py3.12}-redis-v5.3.1
    {py3.9,py3.12,py3.13}-redis-v6.4.0
    {py3.10,py3.13,py3.14,py3.14t}-redis-v7.1.0

    {py3.6}-redis_py_cluster_legacy-v1.3.6
    {py3.6,py3.7,py3.8}-redis_py_cluster_legacy-v2.1.3

    {py3.6,py3.8,py3.9}-sqlalchemy-v1.3.24
    {py3.6,py3.11,py3.12}-sqlalchemy-v1.4.54
    {py3.7,py3.12,py3.13}-sqlalchemy-v2.0.44


    # ~~~ Flags ~~~
    {py3.8,py3.12,py3.13}-launchdarkly-v9.8.1
    {py3.9,py3.13,py3.14,py3.14t}-launchdarkly-v9.14.0

    {py3.8,py3.13,py3.14,py3.14t}-openfeature-v0.7.5
    {py3.9,py3.13,py3.14,py3.14t}-openfeature-v0.8.4

    {py3.7,py3.13,py3.14}-statsig-v0.55.3
    {py3.7,py3.13,py3.14}-statsig-v0.66.1

    {py3.8,py3.12,py3.13}-unleash-v6.0.1
    {py3.8,py3.12,py3.13}-unleash-v6.4.1


    # ~~~ GraphQL ~~~
    {py3.8,py3.10,py3.11}-ariadne-v0.20.1
    {py3.9,py3.12,py3.13}-ariadne-v0.26.2

    {py3.6,py3.9,py3.10}-gql-v3.4.1
    {py3.9,py3.12,py3.13}-gql-v4.0.0
    {py3.9,py3.12,py3.13}-gql-v4.2.0b0

    {py3.6,py3.9,py3.10}-graphene-v3.3
    {py3.8,py3.12,py3.13}-graphene-v3.4.3

    {py3.8,py3.10,py3.11}-strawberry-v0.209.8
    {py3.10,py3.13,py3.14,py3.14t}-strawberry-v0.287.2


    # ~~~ Network ~~~
    {py3.7,py3.8}-grpc-v1.32.0
    {py3.7,py3.9,py3.10}-grpc-v1.47.5
    {py3.7,py3.11,py3.12}-grpc-v1.62.3
    {py3.9,py3.13,py3.14}-grpc-v1.76.0

    {py3.6,py3.8,py3.9}-httpx-v0.16.1
    {py3.6,py3.9,py3.10}-httpx-v0.20.0
    {py3.7,py3.10,py3.11}-httpx-v0.24.1
    {py3.9,py3.11,py3.12}-httpx-v0.28.1

    {py3.6}-requests-v2.12.5
    {py3.9,py3.13,py3.14,py3.14t}-requests-v2.32.5


    # ~~~ Tasks ~~~
    {py3.7,py3.9,py3.10}-arq-v0.23
    {py3.8,py3.11,py3.12}-arq-v0.26.3

    {py3.7}-beam-v2.14.0
    {py3.9,py3.12,py3.13}-beam-v2.69.0
    {py3.10,py3.12,py3.13}-beam-v2.70.0rc2

    {py3.6,py3.7,py3.8}-celery-v4.4.7
    {py3.9,py3.12,py3.13}-celery-v5.6.0

    {py3.6,py3.7}-dramatiq-v1.9.0
    {py3.10,py3.13,py3.14,py3.14t}-dramatiq-v2.0.0

    {py3.6,py3.7}-huey-v2.1.3
    {py3.6,py3.13,py3.14,py3.14t}-huey-v2.5.5

    {py3.9,py3.10}-ray-v2.7.2
    {py3.10,py3.12,py3.13}-ray-v2.52.1

    {py3.6}-rq-v0.8.2
    {py3.6,py3.7}-rq-v0.13.0
    {py3.7,py3.11,py3.12}-rq-v1.16.2
    {py3.9,py3.12,py3.13}-rq-v2.6.1

    {py3.8,py3.9}-spark-v3.0.3
    {py3.8,py3.10,py3.11}-spark-v3.5.7
    {py3.9,py3.12,py3.13}-spark-v4.0.1


    # ~~~ Web 1 ~~~
    {py3.6,py3.7}-django-v1.11.29
    {py3.6,py3.8,py3.9}-django-v2.2.28
    {py3.6,py3.9,py3.10}-django-v3.2.25
    {py3.8,py3.11,py3.12}-django-v4.2.27
    {py3.10,py3.13,py3.14,py3.14t}-django-v5.2.9
    {py3.12,py3.13,py3.14,py3.14t}-django-v6.0

    {py3.6,py3.7,py3.8}-flask-v1.1.4
    {py3.8,py3.13,py3.14,py3.14t}-flask-v2.3.3
    {py3.9,py3.13,py3.14,py3.14t}-flask-v3.1.2

    {py3.6,py3.9,py3.10}-starlette-v0.16.0
    {py3.7,py3.10,py3.11}-starlette-v0.27.0
    {py3.8,py3.12,py3.13}-starlette-v0.38.6
    {py3.10,py3.13,py3.14,py3.14t}-starlette-v0.50.0

    {py3.6,py3.9,py3.10}-fastapi-v0.79.1
    {py3.7,py3.10,py3.11}-fastapi-v0.94.1
    {py3.8,py3.11,py3.12}-fastapi-v0.109.2
    {py3.8,py3.13,py3.14,py3.14t}-fastapi-v0.124.0


    # ~~~ Web 2 ~~~
    {py3.7}-aiohttp-v3.4.4
    {py3.7,py3.8,py3.9}-aiohttp-v3.7.4
    {py3.8,py3.12,py3.13}-aiohttp-v3.10.11
    {py3.9,py3.13,py3.14,py3.14t}-aiohttp-v3.13.2

    {py3.6,py3.7}-bottle-v0.12.25
    {py3.8,py3.12,py3.13}-bottle-v0.13.4

    {py3.6}-falcon-v1.4.1
    {py3.6,py3.7}-falcon-v2.0.0
    {py3.6,py3.11,py3.12}-falcon-v3.1.3
    {py3.9,py3.11,py3.12}-falcon-v4.2.0

    {py3.8,py3.10,py3.11}-litestar-v2.0.1
    {py3.8,py3.11,py3.12}-litestar-v2.6.4
    {py3.8,py3.11,py3.12}-litestar-v2.12.1
    {py3.8,py3.12,py3.13}-litestar-v2.18.0

    {py3.6}-pyramid-v1.8.6
    {py3.6,py3.8,py3.9}-pyramid-v1.10.8
    {py3.6,py3.10,py3.11}-pyramid-v2.0.2

    {py3.7,py3.9,py3.10}-quart-v0.16.3
    {py3.9,py3.13,py3.14,py3.14t}-quart-v0.20.0

    {py3.6}-sanic-v0.8.3
    {py3.6,py3.8,py3.9}-sanic-v20.12.7
    {py3.8,py3.10,py3.11}-sanic-v23.12.2
    {py3.9,py3.12,py3.13}-sanic-v25.3.0

    {py3.8,py3.10,py3.11}-starlite-v1.48.1
    {py3.8,py3.10,py3.11}-starlite-v1.51.16

    {py3.6,py3.7,py3.8}-tornado-v6.0.4
    {py3.9,py3.12,py3.13}-tornado-v6.5.2


    # ~~~ Misc ~~~
    {py3.6,py3.12,py3.13}-loguru-v0.7.3

    {py3.6,py3.7,py3.8}-pure_eval-v0.0.3
    {py3.7,py3.12,py3.13}-pure_eval-v0.2.3

    {py3.6}-trytond-v4.6.22
    {py3.6}-trytond-v4.8.18
    {py3.6,py3.7,py3.8}-trytond-v5.8.16
    {py3.8,py3.10,py3.11}-trytond-v6.8.17
    {py3.9,py3.12,py3.13}-trytond-v7.6.11

    {py3.7,py3.12,py3.13}-typer-v0.15.4
    {py3.8,py3.13,py3.14,py3.14t}-typer-v0.20.0



[testenv]
deps =
    # if you change requirements-testing.txt and your change is not being reflected
    # in what's installed by tox (when running tox locally), try running tox
    # with the -r flag
    -r requirements-testing.txt

    linters: -r requirements-linting.txt
    linters: werkzeug<2.3.0

    # === Common ===
    py3.8-common: hypothesis
    common: pytest-asyncio
    # See https://github.com/pytest-dev/pytest/issues/9621
    # and https://github.com/pytest-dev/pytest-forked/issues/67
    # for justification of the upper bound on pytest
    {py3.6,py3.7}-common: pytest<7.0.0
    {py3.8,py3.9,py3.10,py3.11,py3.12,py3.13,py3.14,py3.14t}-common: pytest
    # coverage 7.11.1-7.11.3 makes some of our tests flake
    {py3.14,py3.14t}-common: coverage==7.11.0

    # === Gevent ===
    {py3.6,py3.7,py3.8,py3.9,py3.10,py3.11}-gevent: gevent>=22.10.0, <22.11.0
    {py3.12}-gevent: gevent
    # See https://github.com/pytest-dev/pytest/issues/9621
    # and https://github.com/pytest-dev/pytest-forked/issues/67
    # for justification of the upper bound on pytest
    {py3.6,py3.7}-gevent: pytest<7.0.0
    {py3.8,py3.9,py3.10,py3.11,py3.12}-gevent: pytest
    gevent: pytest-asyncio
    {py3.10,py3.11}-gevent: zope.event<5.0.0
    {py3.10,py3.11}-gevent: zope.interface<8.0

    # === Integration Deactivation ===
    integration_deactivation: openai
    integration_deactivation: anthropic
    integration_deactivation: langchain

    # === Integrations ===

    # Asgi
    asgi: pytest-asyncio
    asgi: async-asgi-testclient

    # AWS Lambda
    aws_lambda: aws-cdk-lib
    aws_lambda: aws-sam-cli
    aws_lambda: boto3
    aws_lambda: fastapi
    aws_lambda: requests
    aws_lambda: uvicorn

    # OpenTelemetry (OTel)
    opentelemetry: opentelemetry-distro

    # OpenTelemetry with OTLP
    otlp: opentelemetry-distro[otlp]

    # OpenTelemetry Experimental (POTel)
    potel: -e .[opentelemetry-experimental]

    # === Integrations - Auto-generated ===
    # These come from the populate_tox.py script.

    # ~~~ MCP ~~~
    mcp-v1.15.0: mcp==1.15.0
    mcp-v1.18.0: mcp==1.18.0
    mcp-v1.21.2: mcp==1.21.2
    mcp-v1.23.2: mcp==1.23.2
    mcp: pytest-asyncio

    fastmcp-v0.1.0: fastmcp==0.1.0
    fastmcp-v0.4.1: fastmcp==0.4.1
    fastmcp-v1.0: fastmcp==1.0
    fastmcp-v2.13.3: fastmcp==2.13.3
    fastmcp: pytest-asyncio


    # ~~~ Agents ~~~
    openai_agents-v0.0.19: openai-agents==0.0.19
    openai_agents-v0.2.11: openai-agents==0.2.11
    openai_agents-v0.4.2: openai-agents==0.4.2
    openai_agents-v0.6.2: openai-agents==0.6.2
    openai_agents: pytest-asyncio

    pydantic_ai-v1.0.18: pydantic-ai==1.0.18
    pydantic_ai-v1.9.1: pydantic-ai==1.9.1
    pydantic_ai-v1.18.0: pydantic-ai==1.18.0
    pydantic_ai-v1.28.0: pydantic-ai==1.28.0
    pydantic_ai: pytest-asyncio


    # ~~~ AI Workflow ~~~
    langchain-base-v0.1.20: langchain==0.1.20
    langchain-base-v0.3.27: langchain==0.3.27
    langchain-base-v1.1.3: langchain==1.1.3
    langchain-base: pytest-asyncio
    langchain-base: openai
    langchain-base: tiktoken
    langchain-base: langchain-openai
    langchain-base-v0.3.27: langchain-community
    langchain-base-v1.1.3: langchain-community
    langchain-base-v1.1.3: langchain-classic

    langchain-notiktoken-v0.1.20: langchain==0.1.20
    langchain-notiktoken-v0.3.27: langchain==0.3.27
    langchain-notiktoken-v1.1.3: langchain==1.1.3
    langchain-notiktoken: pytest-asyncio
    langchain-notiktoken: openai
    langchain-notiktoken: langchain-openai
    langchain-notiktoken-v0.3.27: langchain-community
    langchain-notiktoken-v1.1.3: langchain-community
    langchain-notiktoken-v1.1.3: langchain-classic

    langgraph-v0.6.11: langgraph==0.6.11
    langgraph-v1.0.4: langgraph==1.0.4


    # ~~~ AI ~~~
    anthropic-v0.16.0: anthropic==0.16.0
    anthropic-v0.36.2: anthropic==0.36.2
    anthropic-v0.56.0: anthropic==0.56.0
    anthropic-v0.75.0: anthropic==0.75.0
    anthropic: pytest-asyncio
    anthropic-v0.16.0: httpx<0.28.0
    anthropic-v0.36.2: httpx<0.28.0

    cohere-v5.4.0: cohere==5.4.0
    cohere-v5.10.0: cohere==5.10.0
    cohere-v5.15.0: cohere==5.15.0
    cohere-v5.20.0: cohere==5.20.0

    google_genai-v1.29.0: google-genai==1.29.0
    google_genai-v1.37.0: google-genai==1.37.0
    google_genai-v1.45.0: google-genai==1.45.0
    google_genai-v1.54.0: google-genai==1.54.0
    google_genai: pytest-asyncio

    huggingface_hub-v0.24.7: huggingface_hub==0.24.7
    huggingface_hub-v0.36.0: huggingface_hub==0.36.0
    huggingface_hub-v1.2.1: huggingface_hub==1.2.1
    huggingface_hub: responses
    huggingface_hub: pytest-httpx

    litellm-v1.77.7: litellm==1.77.7
    litellm-v1.78.7: litellm==1.78.7
    litellm-v1.79.3: litellm==1.79.3
    litellm-v1.80.9: litellm==1.80.9

    openai-base-v1.0.1: openai==1.0.1
    openai-base-v1.109.1: openai==1.109.1
    openai-base-v2.9.0: openai==2.9.0
    openai-base: pytest-asyncio
    openai-base: tiktoken
    openai-base-v1.0.1: httpx<0.28

    openai-notiktoken-v1.0.1: openai==1.0.1
    openai-notiktoken-v1.109.1: openai==1.109.1
    openai-notiktoken-v2.9.0: openai==2.9.0
    openai-notiktoken: pytest-asyncio
    openai-notiktoken-v1.0.1: httpx<0.28


    # ~~~ Cloud ~~~
    boto3-v1.12.49: boto3==1.12.49
    boto3-v1.21.46: boto3==1.21.46
    boto3-v1.33.13: boto3==1.33.13
    boto3-v1.42.5: boto3==1.42.5
    {py3.7,py3.8}-boto3: urllib3<2.0.0

    chalice-v1.16.0: chalice==1.16.0
    chalice-v1.32.0: chalice==1.32.0
    chalice: pytest-chalice


    # ~~~ DBs ~~~
    asyncpg-v0.23.0: asyncpg==0.23.0
    asyncpg-v0.26.0: asyncpg==0.26.0
    asyncpg-v0.29.0: asyncpg==0.29.0
    asyncpg-v0.31.0: asyncpg==0.31.0
    asyncpg: pytest-asyncio

    clickhouse_driver-v0.2.10: clickhouse-driver==0.2.10

    pymongo-v3.5.1: pymongo==3.5.1
    pymongo-v3.13.0: pymongo==3.13.0
    pymongo-v4.15.5: pymongo==4.15.5
    pymongo: mockupdb

    redis-v2.10.6: redis==2.10.6
    redis-v3.5.3: redis==3.5.3
    redis-v4.6.0: redis==4.6.0
    redis-v5.3.1: redis==5.3.1
    redis-v6.4.0: redis==6.4.0
    redis-v7.1.0: redis==7.1.0
    redis: fakeredis!=1.7.4
    redis: pytest<8.0.0
    redis-v4.6.0: fakeredis<2.31.0
    {py3.6,py3.7,py3.8}-redis: fakeredis<2.26.0
    {py3.7,py3.8,py3.9,py3.10,py3.11,py3.12,py3.13}-redis: pytest-asyncio

    redis_py_cluster_legacy-v1.3.6: redis-py-cluster==1.3.6
    redis_py_cluster_legacy-v2.1.3: redis-py-cluster==2.1.3

    sqlalchemy-v1.3.24: sqlalchemy==1.3.24
    sqlalchemy-v1.4.54: sqlalchemy==1.4.54
    sqlalchemy-v2.0.44: sqlalchemy==2.0.44


    # ~~~ Flags ~~~
    launchdarkly-v9.8.1: launchdarkly-server-sdk==9.8.1
    launchdarkly-v9.14.0: launchdarkly-server-sdk==9.14.0

    openfeature-v0.7.5: openfeature-sdk==0.7.5
    openfeature-v0.8.4: openfeature-sdk==0.8.4

    statsig-v0.55.3: statsig==0.55.3
    statsig-v0.66.1: statsig==0.66.1
    statsig: typing_extensions

    unleash-v6.0.1: UnleashClient==6.0.1
    unleash-v6.4.1: UnleashClient==6.4.1


    # ~~~ GraphQL ~~~
    ariadne-v0.20.1: ariadne==0.20.1
    ariadne-v0.26.2: ariadne==0.26.2
    ariadne: fastapi
    ariadne: flask
    ariadne: httpx

    gql-v3.4.1: gql[all]==3.4.1
    gql-v4.0.0: gql[all]==4.0.0
    gql-v4.2.0b0: gql[all]==4.2.0b0

    graphene-v3.3: graphene==3.3
    graphene-v3.4.3: graphene==3.4.3
    graphene: blinker
    graphene: fastapi
    graphene: flask
    graphene: httpx
    {py3.6}-graphene: aiocontextvars

    strawberry-v0.209.8: strawberry-graphql[fastapi,flask]==0.209.8
    strawberry-v0.287.2: strawberry-graphql[fastapi,flask]==0.287.2
    strawberry: httpx
    strawberry-v0.209.8: pydantic<2.11


    # ~~~ Network ~~~
    grpc-v1.32.0: grpcio==1.32.0
    grpc-v1.47.5: grpcio==1.47.5
    grpc-v1.62.3: grpcio==1.62.3
    grpc-v1.76.0: grpcio==1.76.0
    grpc: protobuf
    grpc: mypy-protobuf
    grpc: types-protobuf
    grpc: pytest-asyncio

    httpx-v0.16.1: httpx==0.16.1
    httpx-v0.20.0: httpx==0.20.0
    httpx-v0.24.1: httpx==0.24.1
    httpx-v0.28.1: httpx==0.28.1
    httpx: anyio<4.0.0
    httpx-v0.16.1: pytest-httpx==0.10.0
    httpx-v0.20.0: pytest-httpx==0.14.0
    httpx-v0.24.1: pytest-httpx==0.22.0
    httpx-v0.28.1: pytest-httpx==0.35.0

    requests-v2.12.5: requests==2.12.5
    requests-v2.32.5: requests==2.32.5


    # ~~~ Tasks ~~~
    arq-v0.23: arq==0.23
    arq-v0.26.3: arq==0.26.3
    arq: async-timeout
    arq: pytest-asyncio
    arq: fakeredis>=2.2.0,<2.8
    arq-v0.23: pydantic<2

    beam-v2.14.0: apache-beam==2.14.0
    beam-v2.69.0: apache-beam==2.69.0
    beam-v2.70.0rc2: apache-beam==2.70.0rc2
    beam: dill

    celery-v4.4.7: celery==4.4.7
    celery-v5.6.0: celery==5.6.0
    celery: newrelic<10.17.0
    celery: redis
    {py3.7}-celery: importlib-metadata<5.0

    dramatiq-v1.9.0: dramatiq==1.9.0
    dramatiq-v2.0.0: dramatiq==2.0.0

    huey-v2.1.3: huey==2.1.3
    huey-v2.5.5: huey==2.5.5

    ray-v2.7.2: ray==2.7.2
    ray-v2.52.1: ray==2.52.1

    rq-v0.8.2: rq==0.8.2
    rq-v0.13.0: rq==0.13.0
    rq-v1.16.2: rq==1.16.2
    rq-v2.6.1: rq==2.6.1
    rq: fakeredis<2.28.0
    rq-v0.8.2: fakeredis<1.0
    rq-v0.8.2: redis<3.2.2
    rq-v0.13.0: fakeredis>=1.0,<1.7.4
    {py3.6,py3.7}-rq: fakeredis!=2.26.0

    spark-v3.0.3: pyspark==3.0.3
    spark-v3.5.7: pyspark==3.5.7
    spark-v4.0.1: pyspark==4.0.1


    # ~~~ Web 1 ~~~
    django-v1.11.29: django==1.11.29
    django-v2.2.28: django==2.2.28
    django-v3.2.25: django==3.2.25
    django-v4.2.27: django==4.2.27
    django-v5.2.9: django==5.2.9
    django-v6.0: django==6.0
    django: psycopg2-binary
    django: djangorestframework
    django: pytest-django
    django: Werkzeug
    django-v2.2.28: channels[daphne]
    django-v3.2.25: channels[daphne]
    django-v4.2.27: channels[daphne]
    django-v5.2.9: channels[daphne]
    django-v6.0: channels[daphne]
    django-v2.2.28: six
    django-v3.2.25: pytest-asyncio
    django-v4.2.27: pytest-asyncio
    django-v5.2.9: pytest-asyncio
    django-v6.0: pytest-asyncio
    django-v1.11.29: djangorestframework>=3.0,<4.0
    django-v1.11.29: Werkzeug<2.1.0
    django-v2.2.28: djangorestframework>=3.0,<4.0
    django-v2.2.28: Werkzeug<2.1.0
    django-v3.2.25: djangorestframework>=3.0,<4.0
    django-v3.2.25: Werkzeug<2.1.0
    django-v1.11.29: pytest-django<4.0
    django-v2.2.28: pytest-django<4.0
    {py3.14,py3.14t}-django: coverage==7.11.0

    flask-v1.1.4: flask==1.1.4
    flask-v2.3.3: flask==2.3.3
    flask-v3.1.2: flask==3.1.2
    flask: flask-login
    flask: werkzeug
    flask-v1.1.4: werkzeug<2.1.0
    flask-v1.1.4: markupsafe<2.1.0

    starlette-v0.16.0: starlette==0.16.0
    starlette-v0.27.0: starlette==0.27.0
    starlette-v0.38.6: starlette==0.38.6
    starlette-v0.50.0: starlette==0.50.0
    starlette: pytest-asyncio
    starlette: python-multipart
    starlette: requests
    starlette: anyio<4.0.0
    starlette: jinja2
    starlette: httpx
    starlette-v0.16.0: httpx<0.28.0
    starlette-v0.27.0: httpx<0.28.0
    {py3.6}-starlette: aiocontextvars

    fastapi-v0.79.1: fastapi==0.79.1
    fastapi-v0.94.1: fastapi==0.94.1
    fastapi-v0.109.2: fastapi==0.109.2
    fastapi-v0.124.0: fastapi==0.124.0
    fastapi: httpx
    fastapi: pytest-asyncio
    fastapi: python-multipart
    fastapi: requests
    fastapi: anyio<4
    fastapi-v0.79.1: httpx<0.28.0
    fastapi-v0.94.1: httpx<0.28.0
    fastapi-v0.109.2: httpx<0.28.0
    {py3.6}-fastapi: aiocontextvars


    # ~~~ Web 2 ~~~
    aiohttp-v3.4.4: aiohttp==3.4.4
    aiohttp-v3.7.4: aiohttp==3.7.4
    aiohttp-v3.10.11: aiohttp==3.10.11
    aiohttp-v3.13.2: aiohttp==3.13.2
    aiohttp: pytest-aiohttp
    aiohttp-v3.10.11: pytest-asyncio
    aiohttp-v3.13.2: pytest-asyncio

    bottle-v0.12.25: bottle==0.12.25
    bottle-v0.13.4: bottle==0.13.4
    bottle: werkzeug<2.1.0

    falcon-v1.4.1: falcon==1.4.1
    falcon-v2.0.0: falcon==2.0.0
    falcon-v3.1.3: falcon==3.1.3
    falcon-v4.2.0: falcon==4.2.0

    litestar-v2.0.1: litestar==2.0.1
    litestar-v2.6.4: litestar==2.6.4
    litestar-v2.12.1: litestar==2.12.1
    litestar-v2.18.0: litestar==2.18.0
    litestar: pytest-asyncio
    litestar: python-multipart
    litestar: requests
    litestar: cryptography
    litestar: sniffio
    litestar-v2.0.1: httpx<0.28
    litestar-v2.6.4: httpx<0.28

    pyramid-v1.8.6: pyramid==1.8.6
    pyramid-v1.10.8: pyramid==1.10.8
    pyramid-v2.0.2: pyramid==2.0.2
    pyramid: werkzeug<2.1.0

    quart-v0.16.3: quart==0.16.3
    quart-v0.20.0: quart==0.20.0
    quart: quart-auth
    quart: pytest-asyncio
    quart: Werkzeug
    quart-v0.20.0: quart-flask-patch
    quart-v0.16.3: blinker<1.6
    quart-v0.16.3: jinja2<3.1.0
    quart-v0.16.3: Werkzeug<2.3.0
    quart-v0.16.3: hypercorn<0.15.0
    {py3.8}-quart: taskgroup==0.0.0a4

    sanic-v0.8.3: sanic==0.8.3
    sanic-v20.12.7: sanic==20.12.7
    sanic-v23.12.2: sanic==23.12.2
    sanic-v25.3.0: sanic==25.3.0
    sanic: websockets<11.0
    sanic: aiohttp
    sanic-v23.12.2: sanic-testing
    sanic-v25.3.0: sanic-testing
    {py3.6}-sanic: aiocontextvars==0.2.1
    {py3.8}-sanic: tracerite<1.1.2

    starlite-v1.48.1: starlite==1.48.1
    starlite-v1.51.16: starlite==1.51.16
    starlite: pytest-asyncio
    starlite: python-multipart
    starlite: requests
    starlite: cryptography
    starlite: pydantic<2.0.0
    starlite: httpx<0.28

    tornado-v6.0.4: tornado==6.0.4
    tornado-v6.5.2: tornado==6.5.2
    tornado: pytest
    tornado-v6.0.4: pytest<8.2
    {py3.6}-tornado: aiocontextvars


    # ~~~ Misc ~~~
    loguru-v0.7.3: loguru==0.7.3

    pure_eval-v0.0.3: pure_eval==0.0.3
    pure_eval-v0.2.3: pure_eval==0.2.3

    trytond-v4.6.22: trytond==4.6.22
    trytond-v4.8.18: trytond==4.8.18
    trytond-v5.8.16: trytond==5.8.16
    trytond-v6.8.17: trytond==6.8.17
    trytond-v7.6.11: trytond==7.6.11
    trytond: werkzeug
    trytond-v4.6.22: werkzeug<1.0
    trytond-v4.8.18: werkzeug<1.0

    typer-v0.15.4: typer==0.15.4
    typer-v0.20.0: typer==0.20.0



setenv =
    PYTHONDONTWRITEBYTECODE=1
    OBJC_DISABLE_INITIALIZE_FORK_SAFETY=YES
    COVERAGE_FILE=.coverage-sentry-{envname}
    py3.6: COVERAGE_RCFILE=.coveragerc36
    # Lowest version to support free-threading
    # https://discuss.python.org/t/announcement-pip-24-1-release/56281
    py3.14t: VIRTUALENV_PIP=24.1

    django: DJANGO_SETTINGS_MODULE=tests.integrations.django.myapp.settings
    spark-v{3.0.3,3.5.6}: JAVA_HOME=/usr/lib/jvm/temurin-11-jdk-amd64

    # Avoid polluting test suite with imports
    common: PYTEST_ADDOPTS="--ignore=tests/test_shadowed_module.py"
    gevent: PYTEST_ADDOPTS="--ignore=tests/test_shadowed_module.py"

    # TESTPATH definitions for test suites not managed by toxgen
    common: TESTPATH=tests
    gevent: TESTPATH=tests
    integration_deactivation: TESTPATH=tests/test_ai_integration_deactivation.py
    shadowed_module: TESTPATH=tests/test_shadowed_module.py
    asgi: TESTPATH=tests/integrations/asgi
    aws_lambda: TESTPATH=tests/integrations/aws_lambda
    cloud_resource_context: TESTPATH=tests/integrations/cloud_resource_context
    gcp: TESTPATH=tests/integrations/gcp
    opentelemetry: TESTPATH=tests/integrations/opentelemetry
    otlp: TESTPATH=tests/integrations/otlp
    potel: TESTPATH=tests/integrations/opentelemetry
    socket: TESTPATH=tests/integrations/socket

    # These TESTPATH definitions are auto-generated by toxgen
    aiohttp: TESTPATH=tests/integrations/aiohttp
    anthropic: TESTPATH=tests/integrations/anthropic
    ariadne: TESTPATH=tests/integrations/ariadne
    arq: TESTPATH=tests/integrations/arq
    asyncpg: TESTPATH=tests/integrations/asyncpg
    beam: TESTPATH=tests/integrations/beam
    boto3: TESTPATH=tests/integrations/boto3
    bottle: TESTPATH=tests/integrations/bottle
    celery: TESTPATH=tests/integrations/celery
    chalice: TESTPATH=tests/integrations/chalice
    clickhouse_driver: TESTPATH=tests/integrations/clickhouse_driver
    cohere: TESTPATH=tests/integrations/cohere
    django: TESTPATH=tests/integrations/django
    dramatiq: TESTPATH=tests/integrations/dramatiq
    falcon: TESTPATH=tests/integrations/falcon
    fastapi: TESTPATH=tests/integrations/fastapi
    fastmcp: TESTPATH=tests/integrations/fastmcp
    flask: TESTPATH=tests/integrations/flask
    google_genai: TESTPATH=tests/integrations/google_genai
    gql: TESTPATH=tests/integrations/gql
    graphene: TESTPATH=tests/integrations/graphene
    grpc: TESTPATH=tests/integrations/grpc
    httpx: TESTPATH=tests/integrations/httpx
    huey: TESTPATH=tests/integrations/huey
    huggingface_hub: TESTPATH=tests/integrations/huggingface_hub
    langchain-base: TESTPATH=tests/integrations/langchain
    langchain-notiktoken: TESTPATH=tests/integrations/langchain
    langgraph: TESTPATH=tests/integrations/langgraph
    launchdarkly: TESTPATH=tests/integrations/launchdarkly
    litellm: TESTPATH=tests/integrations/litellm
    litestar: TESTPATH=tests/integrations/litestar
    loguru: TESTPATH=tests/integrations/loguru
    mcp: TESTPATH=tests/integrations/mcp
    openai-base: TESTPATH=tests/integrations/openai
    openai-notiktoken: TESTPATH=tests/integrations/openai
    openai_agents: TESTPATH=tests/integrations/openai_agents
    openfeature: TESTPATH=tests/integrations/openfeature
    pure_eval: TESTPATH=tests/integrations/pure_eval
    pydantic_ai: TESTPATH=tests/integrations/pydantic_ai
    pymongo: TESTPATH=tests/integrations/pymongo
    pyramid: TESTPATH=tests/integrations/pyramid
    quart: TESTPATH=tests/integrations/quart
    ray: TESTPATH=tests/integrations/ray
    redis: TESTPATH=tests/integrations/redis
    redis_py_cluster_legacy: TESTPATH=tests/integrations/redis_py_cluster_legacy
    requests: TESTPATH=tests/integrations/requests
    rq: TESTPATH=tests/integrations/rq
    sanic: TESTPATH=tests/integrations/sanic
    spark: TESTPATH=tests/integrations/spark
    sqlalchemy: TESTPATH=tests/integrations/sqlalchemy
    starlette: TESTPATH=tests/integrations/starlette
    starlite: TESTPATH=tests/integrations/starlite
    statsig: TESTPATH=tests/integrations/statsig
    strawberry: TESTPATH=tests/integrations/strawberry
    tornado: TESTPATH=tests/integrations/tornado
    trytond: TESTPATH=tests/integrations/trytond
    typer: TESTPATH=tests/integrations/typer
    unleash: TESTPATH=tests/integrations/unleash

passenv =
    SENTRY_PYTHON_TEST_POSTGRES_HOST
    SENTRY_PYTHON_TEST_POSTGRES_USER
    SENTRY_PYTHON_TEST_POSTGRES_PASSWORD
    SENTRY_PYTHON_TEST_POSTGRES_NAME

usedevelop = True

extras =
    bottle: bottle
    falcon: falcon
    flask: flask
    pymongo: pymongo

basepython =
    py3.6: python3.6
    py3.7: python3.7
    py3.8: python3.8
    py3.9: python3.9
    py3.10: python3.10
    py3.11: python3.11
    py3.12: python3.12
    py3.13: python3.13
    py3.14: python3.14
    py3.14t: python3.14t

    # Python version is pinned here for consistency across environments.
    # Tools like ruff and mypy have options that pin the target Python
    # version (configured in pyproject.toml), ensuring consistent behavior.
    linters: python3.14

commands =
    {py3.7,py3.8}-boto3: pip install urllib3<2.0.0

    ; https://github.com/pallets/flask/issues/4455
    {py3.7,py3.8,py3.9,py3.10,py3.11}-flask-v{1}: pip install "itsdangerous>=0.24,<2.0" "markupsafe<2.0.0" "jinja2<3.1.1"

    ; Running `pytest` as an executable suffers from an import error
    ; when loading tests in scenarios. In particular, django fails to
    ; load the settings from the test module.
    python -m pytest -W error::pytest.PytestUnraisableExceptionWarning {env:TESTPATH} -o junit_suite_name={envname} {posargs}

[testenv:linters]
commands =
    ruff check tests sentry_sdk
    ruff format --check tests sentry_sdk
    mypy sentry_sdk
